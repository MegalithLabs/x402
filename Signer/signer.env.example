# Megalith x402 Payment Authorization Configuration
# This file configures the x402-compliant payment signer (signer.js)
# 
# x402 is an open protocol for internet-native payments using HTTP 402 status codes
# 
# x402 Protocol: https://x402.org
# Documentation: https://github.com/MegalithLabs/x402
# Website: https://megalithlabs.ai

# ================ REQUIRED VARIABLES ================

# NETWORK - Blockchain network to use
# 56 = BNB Chain Mainnet
# 97 = BNB Chain Testnet
NETWORK=

# PAYER_KEY - Private key of the payment sender
# Format: 0x followed by 64 hexadecimal characters
# SECURITY: Never commit this file with real private keys to version control!
PAYER_KEY=

# RECIPIENT - Address that will receive the payment
# Format: 0x followed by 40 hexadecimal characters (Ethereum address)
RECIPIENT=

# TOKEN - ERC-20 or EIP-3009 token contract address
# Format: 0x followed by 40 hexadecimal characters
# The signer automatically detects if the token supports EIP-3009 or requires Stargate
TOKEN=

# AMOUNT - Payment amount in human-readable units
# The signer automatically handles token decimals
# Examples: 
#   "1.5"    = 1.5 tokens
#   "10"     = 10 tokens
#   "0.001"  = 0.001 tokens (useful for micropayments)
AMOUNT=

# ================ OPTIONAL VARIABLES ================

# STARGATE_CONTRACT - MegalithStargate contract address (for standard ERC-20 tokens only)
# Leave empty (recommended) to automatically fetch from API
# Only needed for standard ERC-20 tokens (not EIP-3009)
# 
# The script will auto-fetch the latest deployed version from:
#   https://x402.megalithlabs.ai/contracts
#
# Manual override example:
#   STARGATE_CONTRACT=0x40200001004B5110333e4De8179426971Efd034A
STARGATE_CONTRACT=

# FACILITATOR_API - Megalith x402 facilitator service endpoint
# Default: https://x402.megalithlabs.ai
# Only change this if running your own facilitator or testing locally
# FACILITATOR_API=http://localhost:3000

# ================ NOTES ================

## Token Type Detection
# The signer automatically detects your token type:
#
# EIP-3009 tokens (e.g., USDC):
#   - Native gasless transfer support
#   - No approval required
#   - Direct settlement via transferWithAuthorization
#
# Standard ERC-20 tokens (e.g., USDT):
#   - Uses MegalithStargate for gasless transfers
#   - Requires token approval (run: npm run approve)
#   - Stargate contract fetched automatically

## x402 Protocol Outputs
# The signer creates x402-compliant payment authorizations:
#
# Generated files:
#   - payload.json         : Full x402 payload (for POST to facilitator)
#   - payment-header.txt   : Base64 string (for X-PAYMENT HTTP header)
#   - x402-payment.json    : Decoded payment object (for debugging)
#   - payloads/payload-*.json : Timestamped backup
#
# Usage patterns:
#   1. Standard x402: Send payment-header.txt in X-PAYMENT header to resource server
#   2. Direct settlement: POST payload.json to facilitator /settle endpoint

## Security Best Practices
# - Never commit signer.env with real keys to Git
# - Use .env files only for development/testing
# - For production, use secure key management (hardware wallets, KMS, etc.)
# - Keep this file in .gitignore

## Payment Authorization Details
# - Protocol: x402 v1
# - Scheme: exact (fixed payment amount)
# - Signature: EIP-712 typed data
# - Validity: 1 hour from creation
# - Nonce: Unique per transaction (prevents replay attacks)

# ================ EXAMPLES ================

# Example 1: EIP-3009 token (USDC) on BNB Mainnet
# NETWORK=56
# PAYER_KEY=0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef
# RECIPIENT=0xYourRecipientAddressHere000000000000000
# TOKEN=0x8AC76a51cc950d9822D68b83fE1Ad97B32Cd580d
# AMOUNT=1.5
# STARGATE_CONTRACT=

# Example 2: Standard ERC-20 token (USDT) on BNB Testnet
# NETWORK=97
# PAYER_KEY=0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef
# RECIPIENT=0xYourRecipientAddressHere000000000000000
# TOKEN=0x337610d27c682E347C9cD60BD4b3b107C9d34dDd
# AMOUNT=10
# STARGATE_CONTRACT=
# (Note: Run 'npm run approve' first for ERC-20 tokens)

# ================ NEED HELP? ================
# 
# Documentation: https://github.com/MegalithLabs/x402
# Website: https://megalithlabs.ai
# x402 Protocol: https://x402.org
# Support: support@megalithlabs.ai
